---
layout: post
title: "OpenSource: Часть 2 - Онлайн Консультант, подготовка, выбор стека технологий"

description: "Начало серии постов о разработке бесплатных виджетов на сайт, этот пост посвящен подготовке к разработке"
category: opensource
tags: [opensource, websockets, onLine.Consultant]
preview_image: "/assets/images/opensource-stack-teknology.png"
published: true 
pre_header: >
    OpenSource: Часть 2 - Онлайн Консультант, подготовка, выбор стека технологий
---

<!--more-->

Из картинки уже ясно что мы будем использовать Yii2 Framework, NodeJS, Socket.IO и Docker.

### Yii2 в качестве backend

Я веду активную разработку на двух Фреймворках это Ruby on Rails и Yii2, был опыт разработки на Symfony как первой версии
так и второй. По моему мнению Symfony слишком большой и сложный, он отлично подойдет для крупных Enterprise решений, в 
нашем же случае можно выбрать более простой но в тоже время весьма мощный Yii2, по сравнению
с первой версией на мой взгляд он стал на много проще в обращении и на много продуктивнее в качестве разработки. 
Подробнее про возможности Yii2 можете почитать на [официальном сайте](http://www.yiiframework.com/doc-2.0/guide-index.html)

Yii2 из коробки поддерживает реализацию API, работу с базой данных с помощью ActiveRecord, 
это то что нужно от backend в нашем случае.

### NodeJS в качестве WebSocket сервера

Существует такая интересная библиотека как Socket.IO ее плюс в том что она поддерживает даже те браузеры в которых
еще не было websockets и позволяет работать приложению также как и в современных браузерах. Socket.IO поддерживает 
мультиплексирование, горизонтальное масштабирование и автоматическое кодирование в JSON,
из способов соединения кроме WebSocket's также есть Adobe Flash Socket, AJAX long polling, AJAX multipart streaming, 
Forever Iframe, JSONP Polling.

Причем если браузер клиента не поддерживает websocket то библиотека попробует подключиться через Adobe Flash Socket, 
если не поддерживается и этот формат попробует AJAX long polling и так далее, таким образом наш онлайн консультант будет
работать скорее всего во всех браузерах клиентов, чем мы сразу упрощаем себе жизнь.

### Docker как способ собрать наш стек в одно приложение

Я во всех разработках использую Docker, это на самом деле очень удобно, часто бывают разные версии php или ruby и каждый раз
настраивать окружение под требования проекта не очень удобно, другое дело когда ты с помощью одной команды в консоли
можешь создать сразу весь стек технологий и начать разработку не напрягаясь и не задумываясь о том что версии языков или баз 
данных будут конфликтовать, для каждого проекта своя песочница в которой можно настроить окружение так как будет удобно 
именно для этого проекта. Система при этом не засоряется и при удалении контейнера удаляться все данные и в системе не останется
никакого мусора.

В нашем случае будет 4 контейнера это:

 - База данных - PostgreSQL
 - Redis для кэширования
 - Nginx с модом PageSpeed от Google
 - PHP-FPM для Yii2

### Forntend будет на Angular 2 и Twitter Bootstrap

![Angular 2 и Twitter Bootstrap](/assets/images/opensource-stack-teknology-angular-bs.png)

Я разрабатывал приложение на Angular 1 и хочу сказать достойнейшая вещь! Есть конечно много разных неудобных вещей, но 
в целом впечатление положительное.

С выходом второй версии ребята из корпорации добра, доработали его так что он совсем не похож
на первую версию. В первую очередь хочу отметить что используется Typescript который расширяет функционал базового
JavaScript. К сожалению браузеры пока еще нативно не поддерживают стандарт ECMAScript 6 но в скором будущем это планируется внедрить.
А пока мы будем транслировать все что напишем в обычный JS. При этом Angular 2 сам позаботится об этих нюансах.

Во вторых они позаботились о модульности приложения, теперь каждую отдельную бизнесс логику можно сложить в один модуль
в котором описать необходимое количесто компонентов и отображений. Это упростит нашу разработку и
позволит удобно поддерживать приложение.

На этом пока все, **программируйте открыто!**
